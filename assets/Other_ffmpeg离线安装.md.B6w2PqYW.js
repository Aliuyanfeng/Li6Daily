import{_ as s,c as i,o as e,aN as l}from"./chunks/framework.CuNGkOej.js";const c=JSON.parse('{"title":"ffmpeg离线安装","description":"","frontmatter":{"date":"2025-03-26T11:31:07.000Z","title":"ffmpeg离线安装","permalink":"/pages/368cf8","categories":["Other"]},"headers":[],"relativePath":"Other/ffmpeg离线安装.md","filePath":"Other/ffmpeg离线安装.md","lastUpdated":1762481806000}'),n={name:"Other/ffmpeg离线安装.md"};function t(p,a,h,r,d,o){return e(),i("div",null,[...a[0]||(a[0]=[l(`<h1 id="离线安装ffmpeg" tabindex="-1">离线安装FFMPEG <a class="header-anchor" href="#离线安装ffmpeg" aria-label="Permalink to &quot;离线安装FFMPEG&quot;">​</a></h1><h2 id="_1-官网下载源代码" tabindex="-1">1. 官网下载源代码 <a class="header-anchor" href="#_1-官网下载源代码" aria-label="Permalink to &quot;1. 官网下载源代码&quot;">​</a></h2><p><a href="https://ffmpeg.org/download.html" target="_blank" rel="noreferrer">点击前往ffmpeg官网</a></p><h2 id="_2-解压源代码" tabindex="-1">2. 解压源代码 <a class="header-anchor" href="#_2-解压源代码" aria-label="Permalink to &quot;2. 解压源代码&quot;">​</a></h2><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">xz</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ffmpeg-7.1.tar.xz</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -xf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ffmpeg-7.1.tar</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_3-编译" tabindex="-1">3. 编译 <a class="header-anchor" href="#_3-编译" aria-label="Permalink to &quot;3. 编译&quot;">​</a></h2><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ffmpeg-7.1/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./configure</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --enable-shared</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --prefix=/usr/local/ffmpeg</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>--enable-shared：</strong> 这个选项告诉配置脚本生成动态链接库（在Linux系统中通常是.so文件）。动态链接库可以在运行时被程序加载，而不是在编译时静态链接到程序中。这使得库可以被多个程序共享，而不是每个程序都有一份库的副本。</p><p><strong>--prefix=/usr/local/ffmpeg：</strong> 这个选项指定了安装路径。/usr/local/ffmpeg是FFmpeg安装后的根目录。这意味着FFmpeg的执行文件将会被安装到/usr/local/ffmpeg/bin，库文件会被安装到/usr/local/ffmpeg/lib，头文件会被安装到/usr/local/ffmpeg/include，等等。使用--prefix的好处是可以将软件安装到非系统默认路径，从而避免与系统自带的软件包冲突。</p><h2 id="_4-安装" tabindex="-1">4. 安装 <a class="header-anchor" href="#_4-安装" aria-label="Permalink to &quot;4. 安装&quot;">​</a></h2><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="_5-配置环境变量" tabindex="-1">5. 配置环境变量 <a class="header-anchor" href="#_5-配置环境变量" aria-label="Permalink to &quot;5. 配置环境变量&quot;">​</a></h2><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$PATH:/usr/local/ffmpeg</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="_5-注意事项" tabindex="-1">5. 注意事项 <a class="header-anchor" href="#_5-注意事项" aria-label="Permalink to &quot;5. 注意事项&quot;">​</a></h2><h3 id="_5-1-编译时遇到-yasm-报错修复方法" tabindex="-1">5.1 编译时遇到 yasm 报错修复方法 <a class="header-anchor" href="#_5-1-编译时遇到-yasm-报错修复方法" aria-label="Permalink to &quot;5.1 编译时遇到 yasm 报错修复方法&quot;">​</a></h3><p>遇到如下报错</p><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nasm/yasm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> not</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> found</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> or</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> too</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> old.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Use</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> –disable-x86asm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> crippled</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>官网下载源码 <a href="http://www.tortall.net/projects/yasm/releases/" target="_blank" rel="noreferrer">http://www.tortall.net/projects/yasm/releases/</a></p><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tar</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zxvf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> yasm-1.3.0.tar.gz</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> yasm-1.3.0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./configure</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_5-2-安装完后-输入ffmpeg命令报错" tabindex="-1">5.2 安装完后，输入ffmpeg命令报错 <a class="header-anchor" href="#_5-2-安装完后-输入ffmpeg命令报错" aria-label="Permalink to &quot;5.2 安装完后，输入ffmpeg命令报错&quot;">​</a></h3><p>遇到如下报错</p><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ffmpeg:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> error</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> while</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> loading</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> shared</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> libraries:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> libavdevice.so.61:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cannot</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> open</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> shared</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> object</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> file:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> No</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> such</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> file</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> or</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> directory</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>通过源码安装软件未进行环境变量配置，找不到启动路径 所以需要添加路径</p><p>解决：</p><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/ld.so.conf</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>在文件中添加路径： <code>/usr/local/ffmpeg/lib</code><br><code>usr/local/ffmpeg </code>目录是ffmpeg的安装目录，根据个人不同安装目录修改。<br> 更新环境变量：<code>sudo ldconfig</code></p><h2 id="_6-相关依赖安装" tabindex="-1">6 相关依赖安装 <a class="header-anchor" href="#_6-相关依赖安装" aria-label="Permalink to &quot;6 相关依赖安装&quot;">​</a></h2><h3 id="_6-1-libmp3lame" tabindex="-1">6.1 libmp3lame <a class="header-anchor" href="#_6-1-libmp3lame" aria-label="Permalink to &quot;6.1 libmp3lame&quot;">​</a></h3><p>$ wget <a href="http://downloads.sourceforge.net/project/lame/lame/3.99/lame-3.99.5.tar.gz" target="_blank" rel="noreferrer">http://downloads.sourceforge.net/project/lame/lame/3.99/lame-3.99.5.tar.gz</a> $ tar -xzf lame-3.99.5.tar.gz $ cd lame-3.99.5 $ ./configure --enable-static --enable-shared $ make $ sudo make install</p><p>./configure可能报错 error: cannot guess build type; you must specify one 需要指定参数构建架构 ./configure --build=arm-linux</p><h3 id="_6-2-libx264" tabindex="-1">6.2 libx264 <a class="header-anchor" href="#_6-2-libx264" aria-label="Permalink to &quot;6.2 libx264&quot;">​</a></h3><p>#下载并安装x264 git clone <a href="https://code.videolan.org/videolan/x264.git" target="_blank" rel="noreferrer">https://code.videolan.org/videolan/x264.git</a> cd x264 mkdir build</p><p>./configure --help</p><h4 id="报缺少asm-时-可加入-disable-asm" tabindex="-1">报缺少asm 时 可加入--disable-asm <a class="header-anchor" href="#报缺少asm-时-可加入-disable-asm" aria-label="Permalink to &quot;报缺少asm 时 可加入--disable-asm&quot;">​</a></h4><h4 id="prefix-home-llh-ffmpeg-build-指定安装目录" tabindex="-1">--prefix=/home/llh/ffmpeg/build/ 指定安装目录 <a class="header-anchor" href="#prefix-home-llh-ffmpeg-build-指定安装目录" aria-label="Permalink to &quot;--prefix=/home/llh/ffmpeg/build/ 指定安装目录&quot;">​</a></h4><p>./configure --prefix=/root/FFmpeg7/x264/build --enable-shared --enable-static --disable-asm</p><p>make</p><h4 id="x264将会安装到-root-ffmpeg7-x264-build-目录下" tabindex="-1">x264将会安装到 ：/root/FFmpeg7/x264/build 目录下 <a class="header-anchor" href="#x264将会安装到-root-ffmpeg7-x264-build-目录下" aria-label="Permalink to &quot;x264将会安装到 ：/root/FFmpeg7/x264/build 目录下&quot;">​</a></h4><p>make install</p>`,39)])])}const g=s(n,[["render",t]]);export{c as __pageData,g as default};
