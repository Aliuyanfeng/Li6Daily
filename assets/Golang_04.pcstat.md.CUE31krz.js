import{_ as t,c as a,o as n,aN as i}from"./chunks/framework.DXgs1r1w.js";const e="/Li6Daily/assets/image.Bbrz7LAw.png",b=JSON.parse('{"title":"pcstat","description":"","frontmatter":{"date":"2025-05-22T15:12:20.000Z","title":"pcstat","permalink":"/pages/652b8a","categories":["Golang"]},"headers":[],"relativePath":"Golang/04.pcstat.md","filePath":"Golang/04.pcstat.md","lastUpdated":1767923936000}'),d={name:"Golang/04.pcstat.md"};function p(l,s,r,h,c,o){return n(),a("div",null,[...s[0]||(s[0]=[i(`<h1 id="pcstat" tabindex="-1">pcstat <a class="header-anchor" href="#pcstat" aria-label="Permalink to &quot;pcstat&quot;">​</a></h1><h1 id="pcstat-1" tabindex="-1">PCSTAT <a class="header-anchor" href="#pcstat-1" aria-label="Permalink to &quot;PCSTAT&quot;">​</a></h1><p>pcstat 全称 Page Cache STATistics, 用来统计某个文件的页缓存命中情况，也可以批量对目录或文件集合进行分析。</p><h2 id="安装" tabindex="-1">安装 <a class="header-anchor" href="#安装" aria-label="Permalink to &quot;安装&quot;">​</a></h2><p>仅记录离线安装方式</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 下载源码</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/tobert/pcstat</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 进入目录</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pcstat</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 加载离线mod</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vendor</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 将源码目录路上传至可编译环境下</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 将编译后的二进制文件拷贝至/usr/local/bin目录下</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pcstat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/bin</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 测试</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pcstat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/bin/pcstat</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="测试" tabindex="-1">测试 <a class="header-anchor" href="#测试" aria-label="Permalink to &quot;测试&quot;">​</a></h2><p>测试截图 <img src="`+e+'" alt="alt text" loading="lazy"></p><p>字段说明</p><table tabindex="0"><thead><tr><th>字段名</th><th>含义说明</th></tr></thead><tbody><tr><td><strong>Name</strong></td><td>文件路径，支持相对或绝对路径</td></tr><tr><td><strong>Size (bytes)</strong></td><td>文件总字节大小（Byte），可以用来换算成页数做校验</td></tr><tr><td><strong>Pages</strong></td><td>文件总共占用了多少页（通常一页 4KB，依据系统 <code>getconf PAGE_SIZE</code>）</td></tr><tr><td><strong>Cached</strong></td><td>有多少页当前在**页缓存（page cache）**中</td></tr><tr><td><strong>Percent</strong></td><td>命中率，即：<code>Cached / Pages * 100</code>，表示这个文件被 page cache 命中比例</td></tr></tbody></table><p>参数说明</p><table tabindex="0"><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td><code>-bname</code></td><td>将文件路径转换为 basename（文件名，不含路径），便于缩短输出行宽</td></tr><tr><td><code>-histo</code></td><td>输出命中率的直方图风格图表（非表格），便于快速评估</td></tr><tr><td><code>-json</code></td><td>输出 JSON 格式，便于脚本或其他程序读取</td></tr><tr><td><code>-nohdr</code></td><td>省略表头（适合脚本处理）</td></tr><tr><td><code>-pid &lt;int&gt;</code></td><td>针对某个进程（pid），统计其所有映射文件的缓存命中</td></tr><tr><td><code>-plain</code></td><td>不使用 box-drawing 字符，输出为纯 ASCII（适合终端简洁输出）</td></tr><tr><td><code>-pps</code></td><td>JSON 模式下，输出每个页面的缓存命中详情（per-page status）</td></tr><tr><td><code>-sort</code></td><td>以 Cached 页数排序（默认降序）</td></tr><tr><td><code>-terse</code></td><td>简洁输出，不含表格边框</td></tr><tr><td><code>-unicode</code></td><td>使用 Unicode 表格边框字符（默认）</td></tr></tbody></table>',12)])])}const g=t(d,[["render",p]]);export{b as __pageData,g as default};
